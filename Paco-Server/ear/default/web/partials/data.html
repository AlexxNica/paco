<div ng-controller="CsvCtrl" class="csv data">
  <h2>
    <a href="#">Experiments</a> &gt
    <a href="#/experiment/{{experimentId}}">
      <span ng-if="!experiment">{{experimentId}}</span>
      <span ng-if="experiment">{{experiment.title}}</span>
    </a>
    &gt; Data
  </h2>

  <div ng-if="!csv && !error">
    <span>{{status}}</span>
    <md-progress-circular md-mode="indeterminate"></md-progress-circular>
  </div>

  <div ng-if="csv" class="frame">

        <table>
          <tr>
            <td ng-repeat="cell in table[0] track by $index">
              <a href=""  ng-click="setColumn($index)" ng-class="{arrow: (sortColumn == $index), down: reverseSort }">{{cell}}</a>
            </td>
          </tr>

          <tr ng-repeat="row in table | limitTo: 'Infinity': 1 | orderBy:columnSort:reverseSort">
            <td ng-repeat="cell in row track by $index">{{cell}}</td>
          
          </tr>
          <tfoot>
            <td>Showing {{table.length - 1}} out of {{table.length - 1}}</td>
          </tfoot>
        </table>

    <a ng-href="{{csvData}}" download="export.csv">Download CSV</a>
  </div>

  <div ng-if="error" class="error" ng-bind="error"></div>


</div>
